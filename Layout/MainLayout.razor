@using BlazorDashboard.Components
@using BlazorDashboard.Services
@inherits LayoutComponentBase
@inject AppState State
@implements IDisposable

@* This data-theme attribute is the "magic" that switches the CSS variables *@
<div class="app-container" data-theme="@State.Theme">
    
    <div class="background"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="dashboard">
        <Sidebar />
        <main class="main-content">
            @Body
        </main>
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        State.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        State.OnChange -= StateHasChanged;
    }
}